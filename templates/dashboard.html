{% extends "base.html" %}

{% block title %}Dashboard - InvestIQ{% endblock %}

{% block content %}
<div class="page-header">
    <h1 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem;">
        Welcome back, {{ user.name }}! ðŸ‘‹
    </h1>
    <p style="color: var(--gray); font-size: 1.1rem;">Here's your financial overview</p>
</div>

<!-- Stats Grid -->
<div class="stats-grid" style="margin-top: 2rem;">
    <div class="stat-card" style="animation-delay: 0.1s;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div class="stat-label">Monthly Income</div>
                <div class="stat-value">â‚¹{{ "{:,.0f}".format(user.monthly_income) }}</div>
            </div>
            <div class="card-icon" style="background: linear-gradient(135deg, #10B981, #059669);">
                <i class="fas fa-wallet"></i>
            </div>
        </div>
    </div>
    
    <div class="stat-card" style="animation-delay: 0.2s;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div class="stat-label">Monthly Expenses</div>
                <div class="stat-value" style="color: #EF4444;">â‚¹{{ "{:,.0f}".format(user.monthly_expenses) }}</div>
            </div>
            <div class="card-icon" style="background: linear-gradient(135deg, #EF4444, #DC2626);">
                <i class="fas fa-credit-card"></i>
            </div>
        </div>
    </div>
    
    <div class="stat-card" style="animation-delay: 0.3s;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div class="stat-label">Monthly Savings</div>
                <div class="stat-value">â‚¹{{ "{:,.0f}".format(savings) }}</div>
            </div>
            <div class="card-icon" style="background: linear-gradient(135deg, #3B82F6, #2563EB);">
                <i class="fas fa-piggy-bank"></i>
            </div>
        </div>
    </div>
    
    <div class="stat-card" style="animation-delay: 0.4s;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div class="stat-label">Savings Rate</div>
                <div class="stat-value">{{ "{:.1f}".format(savings_rate) }}%</div>
            </div>
            <div class="card-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">
                <i class="fas fa-chart-line"></i>
            </div>
        </div>
    </div>
</div>

<!-- Update Profile Section -->
<div class="card" style="margin-top: 2rem;">
    <div class="card-header">
        <div class="card-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">
            <i class="fas fa-user-edit"></i>
        </div>
        <div>
            <div class="card-title">Update Your Profile</div>
            <p style="color: var(--gray); margin: 0;">Keep your financial information up to date</p>
        </div>
    </div>
    
    <form method="POST" action="{{ url_for('update_profile') }}">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <div class="form-group">
                <label class="form-label">Age</label>
                <input type="number" name="age" class="form-input" value="{{ user.age }}" min="18" max="100" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">Monthly Income (â‚¹)</label>
                <input type="number" name="income" class="form-input" value="{{ user.monthly_income }}" min="0" step="1000" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">Monthly Expenses (â‚¹)</label>
                <input type="number" name="expenses" class="form-input" value="{{ user.monthly_expenses }}" min="0" step="1000" required>
            </div>
        </div>
        
        <button type="submit" class="btn btn-success" style="margin-top: 1rem;">
            <i class="fas fa-save"></i> Update Profile
        </button>
    </form>
</div>

<!-- Quick Actions -->
<div style="margin-top: 2rem;">
    <h2 style="margin-bottom: 1.5rem; font-weight: 700;">Quick Actions</h2>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
        <a href="{{ url_for('savings') }}" class="action-card" style="text-decoration: none;">
            <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; cursor: pointer;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">
                    <i class="fas fa-piggy-bank"></i>
                </div>
                <h3 style="color: white; margin-bottom: 0.5rem;">Savings Calculator</h3>
                <p style="opacity: 0.9;">Plan your savings allocation</p>
            </div>
        </a>
        
        <a href="{{ url_for('stocks') }}" class="action-card" style="text-decoration: none;">
            <div class="card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; cursor: pointer;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h3 style="color: white; margin-bottom: 0.5rem;">Stock Analysis</h3>
                <p style="opacity: 0.9;">AI-powered stock recommendations</p>
            </div>
        </a>
        
        <a href="{{ url_for('sip_calculator') }}" class="action-card" style="text-decoration: none;">
            <div class="card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; cursor: pointer;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">
                    <i class="fas fa-calculator"></i>
                </div>
                <h3 style="color: white; margin-bottom: 0.5rem;">SIP Calculator</h3>
                <p style="opacity: 0.9;">Calculate investment returns</p>
            </div>
        </a>
        
        <a href="{{ url_for('chatbot') }}" class="action-card" style="text-decoration: none;">
            <div class="card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; cursor: pointer;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">
                    <i class="fas fa-comments"></i>
                </div>
                <h3 style="color: white; margin-bottom: 0.5rem;">AI Chatbot</h3>
                <p style="opacity: 0.9;">Get financial advice</p>
            </div>
        </a>
    </div>
</div>

<style>
.action-card:hover .card {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
}
</style>
{% endblock %}